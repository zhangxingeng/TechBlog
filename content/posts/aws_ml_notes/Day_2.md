## Bucket Policies


### Security of S3
- **User Based**: Which user can use which API calls (IAM policies)
- **Resource Based**: bucketwise rules (instead of user based)
- **permission granted if** IAM pass && bucket policy pass && no explicit DENY
- **Encryption**: obvious

### Bucket Policies (JSON file)
  - `Effect`: (`Allow` or `Deny`) - what current rule does
  - `Sid`: id for current rule (statement)
  - `Resource`: ARN (Amazon Resource Names) of the resource (e.g `arn:aws:s3:::mybucket/*`)
  - `Action`: APIs this rule applies to (e.g. `s3:GetObject`)
  - `Principal`: who this rule applies to (e.g. `*` for all users)
  - One Example:
    ```json
    {
      "Version": "2012-10-17",
      "Id": "PutObjPolicy",
      "Statement": [
        {
          "Sid": "DenyObjectsThatAreNotSSEKMS",
          "Effect": "Allow",
          "Principal": "*",
          "Action": "s3:GetObject",
          "Resource": "arn:aws:s3:::mybucket/*"
        }
      ]
    }
    ```
  - polices can be generated by AWS Policy Generator
  
### Object Encryption
- SSE (Sever-side Encryption)
  - SSE-S3: AWS auto encrypt, user care-free
  - SSE-KMS: AWS key management service, it generates and store keys but user can manage them
  - SSE-C: (customer provide) User provides own keys